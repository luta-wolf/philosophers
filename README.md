Описание
--------
В этом проекте вы изучите основы многопоточности процесса.Вы увидите, как создавать потоки, и откроете для себя мьютексы.

### Общие правила:
- Один или несколько философов сидят за круглым столом. Посреди стола стоит большая миска со спагетти.
- Философы альтернативно <b>едят</b>, <b>думают</b> или <b>спят</b>.
   - во время еды они не думают и не спят;
   - во время мышления они не едят и не спят;
   - и, конечно, во время сна они не едят и не думают.
- На столе тоже есть вилки. <b>Вилок столько же, сколько философов</b>.
- Поскольку подавать и есть спагетти только одной вилкой очень неудобно, философ берет правую и левую вилки, чтобы поесть, по одной в каждую руку.
- Когда философ заканчивает есть, они кладут вилки обратно на стол и начинают спать. Проснувшись, они снова начинают думать. Симуляция прекращается, когда философ умирает от голода.
- Каждый философ должен есть и никогда не должен голодать.
- Философы не разговаривают друг с другом.
- Философы не знают, умрет ли другой философ.
- Нет нужды говорить, что философы должны избегать смерти!

### Правила для основной части:
- Каждый философ должен быть нитью.
- Между каждой парой философов есть одна развилка. Поэтому, если есть несколько философов, то у каждого философа есть вилка с левой стороны и вилка с правой. Если есть только один философ, то на столе должна быть только одна вилка.
- Чтобы философы не дублировали вилки, вы должны защитить состояние вилки с помощью мьютекса для каждой из них.

### Правила для бонусной части:
- Все вилки кладутся на середину стола.
- У них нет состояний в памяти, но количество доступных вилок представлено семафором.
- Каждый философ должен быть процессом. Но основной процесс не должен бытьфилософ.

### Глобальные правила:
- Глобальные переменные запрещены!
- Ваша программа должна принимать следующие аргументы:
   - <b>number_of_philosophers</b> (количество философов, а также количествовилок.)
   - <b>time_to_die</b> ((в миллисекундах): Если философ не начал есть time_to_die
миллисекунды с начала своего последнего приема пищи или начала
симуляции, он умирает.)
   - <b>time_to_eat</b> ((в миллисекундах): время, необходимое философу, чтобы поесть. За это время им нужно будет держать две вилки.)
   - <b>time_to_sleep</b> ((в миллисекундах): время, которое философ проведет во сне.)
   - <b>[number_of_times_each_philosopher_must_eat]</b> ((необязательный аргумент): Если все философы съели хотя бы number_of_times_each_philosopher_must_eat раз, симуляция прекращается. Если не указано иное, моделирование прекращается, когда философ умирает.)
- Каждый философ имеет число в диапазоне от 1 до number_of_philosophers.
- Философ номер 1 сидит рядом с философом номер number_of_philosophers. Любой другой философ номер N находится между философом номер N - 1 и философом номер N + 1.

### О журналах вашей программы:
- Любое изменение состояния философа должно быть отформатировано следующим образом:
   - timestamp_in_ms X has taken a fork
   - timestamp_in_ms X is thinking
   - timestamp_in_ms X is sleeping
   - timestamp_in_ms X is thinking
   - timestamp_in_ms X is died

(Замените timestamp_in_ms текущей меткой времени в миллисекундах, а X - числом философа.)
- Отображаемое сообщение о состоянии не должно смешиваться с другим сообщением.
- Сообщение о смерти философа должно отображаться не более чем через 10 мс после его фактической смерти.
- Опять же, философы должны избегать смерти!
<img width="1060" alt="image" src="https://user-images.githubusercontent.com/58044383/168993268-93980649-fcbf-429a-bbf2-52a6a2ef4c22.png">


Флаг
----
для проверки гонки данных
   
    -fsanitize=thread
    
<img width="855" alt="image" src="https://user-images.githubusercontent.com/58044383/168979080-999496e9-1eed-403e-aa4c-7b5a51249930.png">


Тестер:
------
- [socrates](https://github.com/nesvoboda/socrates)
    
1.Клонируем этот репозиторий рядом с каталогом нашего проекта.
```
     git clone https://github.com/nesvoboda/socrates
```     
```     
    |- philosophers/
    |- socrates/
```

2. Запускаем тест
```
   cd socrates
   python3.7 socrates.py  ../philosophers (<путь к папке с философами>)
```
    
3. Если чего то не хватает доинсталируем это
```
    pip3.7 install <то чего не хватает>
```    
<img width="889" alt="image" src="https://user-images.githubusercontent.com/58044383/168987893-01b44b20-565e-49f3-b2ee-84c3c18c0761.png">
<img width="903" alt="image" src="https://user-images.githubusercontent.com/58044383/168987970-33c8a0d9-71ca-42c9-9778-66911f459ba5.png">



Визуазизатор:
------------
- [philosophers visualizer](https://nafuka11.github.io/philosophers-visualizer/)
<img width="1354" alt="image" src="https://user-images.githubusercontent.com/58044383/168973819-a8f17be5-1c02-4c21-ac87-bec3bd460ca3.png">

Чеклист
-------
- [чеклист](https://github.com/mharriso/school21-checklists/blob/master/ng_4_philosophers.pdf)
<img width="976" alt="image" src="https://user-images.githubusercontent.com/58044383/168980375-9d0cb3ab-7399-456d-bf5c-9afb9e579212.png">


Полезные материалы:
-------------------
- Разбор обедающих философов в [лекции](https://www.youtube.com/watch?v=WzsPbwIwtiw&t=1616s) от marmand, еще [лекция](https://www.notion.so/Philosophers-4a4982d5c1aa4e2db3a8cfd2df7bd1cd).
- Цикл лекций по потокам и процессам [Unix Threads in C](https://www.youtube.com/watch?v=d9s_d28yJq0&list=PLfqABt5AS4FmuQf70psXrsMLEDQXNkLq2) от CodeVault.
- У Столярова "Программирование: введение в профессию" [том 2](http://www.stolyarov.info/books/pdf/progintro_dmkv2.pdf) глава 7, страница 516 и "Введение в операционные системы" [лекция 13, страница 162](http://www.stolyarov.info/books/pdf/osintro.pdf)
- Статьи по [дедлоку](https://learnc.info/c/pthreads_deadlock.html), по [потокам](https://habr.com/ru/post/326138/), по [структуре процессов](http://citforum.ru/operating_systems/bach/glava_56.shtml).

P.S.
---
Хорошо сделанные философы живут в случаях:

    21 290 100 100
    50 210 100 100
    199 2000 600 60

на школьных Маках с одновременно работающей конференцией в Зуме.
